# DB Sync - Apache Configuration
# 

# Disable directory browsing
Options -Indexes

# Enable rewrite engine
RewriteEngine On

# Protect configuration files
<FilesMatch "\.(php|ini|log|json)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Allow specific files
<FilesMatch "^(index|api|demo_setup|sync)\.php$">
    Order allow,deny
    Allow from all
</FilesMatch>

# API Routes
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/(.*)$ api.php?path=$1 [QSA,L]

# Hide PHP extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [L]

# Security headers
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
</IfModule>

# PHP settings
<IfModule mod_php.c>
    php_flag display_errors Off
    php_flag log_errors On
    php_value error_log logs/php_errors.log
</IfModule>

# Gzip compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/javascript
</IfModule>

